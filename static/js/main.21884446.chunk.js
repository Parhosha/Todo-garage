(this.webpackJsonpgarage=this.webpackJsonpgarage||[]).push([[0],{2:function(e,t,a){e.exports={actions:"TodoList_actions__3gw_o",toDo:"TodoList_toDo__u26Jh",wrap:"TodoList_wrap__3_blZ",block:"TodoList_block__6nmvw",blockChange:"TodoList_blockChange__34x1u",red:"TodoList_red__2-6iR",save:"TodoList_save__1_1ds",Add:"TodoList_Add__3GrtY",head:"TodoList_head__1HmyR",Tab:"TodoList_Tab__jAPg1",Content:"TodoList_Content__3y9SF",button:"TodoList_button__B1YIY",preloader:"TodoList_preloader__ZkZlG"}},37:function(e,t,a){e.exports=a.p+"static/media/cat.5c5fe58a.gif"},42:function(e,t,a){e.exports=a(71)},71:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(15),c=a.n(r),s=a(39),i=a(33),u=a(34),l=a(41),d=a(40),m=a(12),p=a(4),f=a(2),b=a.n(f),h=function(e){var t=Object(n.useState)(!1),a=Object(p.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(""),i=Object(p.a)(s,2),u=i[0],l=i[1],d=Object(n.useState)(""),m=Object(p.a)(d,2),f=m[0],h=m[1];Object(n.useEffect)((function(){h(e.description),l(e.name)}),[e.description,e.name]);var g=function(e){e.preventDefault()},E=function(){r&&e.updNameToDoAC(u,e.id),c(!r)};return o.a.createElement("div",{className:b.a.Input},o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:b.a.head},r?o.a.createElement("form",{className:"d-flex ",onSubmit:g},o.a.createElement("input",{type:"text",autoFocus:!0,onChange:function(e){l(e.currentTarget.value)},placeholder:" Start typing here to change name of Task ",className:"form-control",onSubmit:g}),o.a.createElement("div",{className:"btn w-25 p-1 btn-success",onClick:E},"Save")):o.a.createElement(o.a.Fragment,null,o.a.createElement("h4",{className:"text-left "},u||e.name," "),o.a.createElement("h4",{onClick:function(){e.deleteTab(e.id)}},"X"),o.a.createElement("h4",{onClick:E,alt:""})))," ",o.a.createElement("form",{className:"d-flex ",onSubmit:g},o.a.createElement("input",{type:"text",autoFocus:!0,onChange:function(e){console.log(f),h(e.currentTarget.value)},placeholder:" Start typing here to create task... ",className:"form-control"}),o.a.createElement("div",{className:"btn w-25 p-1 btn-success",onClick:function(){""!=f&&e.addnewToDo(f,e.id),h(""),console.log(f)}},"Add Task"))))},g=function(e){var t=Object(n.useState)(!1),a=Object(p.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(e.lists),i=Object(p.a)(s,2),u=i[0],l=i[1],d=Object(n.useState)(e.date),m=Object(p.a)(d,2),f=m[0],h=m[1],g=Object(n.useState)(e.done),E=Object(p.a)(g,2),T=E[0],v=E[1],D=new Date(f),O=new Date,_=O.getDate()+""+O.getMonth()+O.getFullYear(),N=D.getDate()+""+D.getMonth()+D.getFullYear();Object(n.useEffect)((function(){l(e.status),h(e.date),v(e.done)}),[e.status,e.date,e.done]);var j=function(t){e.movePriority(t?-1:1,e.id,e.user_id)};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:b.a.wrap,id:_==N?b.a.red:b.a.empty},r?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:b.a.blockChange},o.a.createElement("div",{className:b.a.change},o.a.createElement("p",null,"Put changes here:"),o.a.createElement("input",{type:"text",autoFocus:!0,onChange:function(e){l(e.currentTarget.value)},placeholder:e.lists,value:u})),o.a.createElement("div",{className:b.a.change},o.a.createElement("p",null,"Date of deadline:"),o.a.createElement("input",{type:"date",onChange:function(e){h(e.currentTarget.value)},placeholder:e.date,value:e.date})),o.a.createElement("div",{className:b.a.change},o.a.createElement("p",null,"Done:"),o.a.createElement("input",{type:"checkbox",onChange:function(e){console.log(!T),v(!T)},checked:T?"checked":""})))):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:b.a.block},o.a.createElement("input",{type:"checkbox",checked:T?"checked":"",readOnly:"readonly"}),o.a.createElement("p",null,u||e.lists))),r?o.a.createElement("div",{className:b.a.save}," ",o.a.createElement("pre",{onClick:function(){c(!1),e.updToDo(u||e.lists,e.id,T,f),l(u)}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:b.a.block},o.a.createElement("pre",{className:"",onClick:function(){c(!0)}})),o.a.createElement("div",{className:b.a.block},o.a.createElement("pre",{className:"",onClick:function(){e.deletePost(e.id)}}," ")),o.a.createElement("div",{className:b.a.block},o.a.createElement("pre",{onClick:function(){return j(1)}}," "),o.a.createElement("pre",{onClick:function(){return j(0)}})))))},E=function(e){var t=Object(n.useState)(!0),a=Object(p.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(""),i=Object(p.a)(s,2),u=i[0],l=i[1];Object(n.useEffect)((function(){l(e.description)}),[e.description]);var d=function(e){e.preventDefault()};return o.a.createElement(o.a.Fragment,null,o.a.createElement(n.Fragment,null,r?o.a.createElement("div",{className:b.a.button,onClick:function(){c(!r)}},"+ Add new tab"):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:b.a.Tab,onSubmit:d},o.a.createElement("form",{className:"d-flex "},o.a.createElement("input",{type:"text",autoFocus:!0,onChange:function(e){console.log(u),l(e.currentTarget.value)},placeholder:" Start typing here to create task... ",className:"form-control",onSubmit:d}),o.a.createElement("div",{className:"btn w-25 p-1 btn-success",onClick:function(){c(!r),e.addNewTab(e.number,e.table_group_id,u),l("")}},"New Tab "))))))},T=function(e){console.log(e);var t=function(t,a,n){var o=e.list.filter((function(e){return e.user_id==n})),r=e.list.filter((function(e){return e.user_id!=n}));for(var c in o)if(o[c].todo_id==a&&o[+c+t].user_id){var s=o[+c+t].description;o[+c+t].description=o[c].description,o[c].description=s,s=o[+c+t].date,o[+c+t].date=o[c].date,o[c].date=s,s=o[+c+t].done,o[+c+t].done=o[c].done,o[c].done=s}o.push.apply(o,Object(m.a)(r)),e.movePriorityAC(o)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"container w-50 "},e.name.map((function(a,n){return o.a.createElement("div",{key:n+a.name,className:b.a.Tab},o.a.createElement(h,{addnewToDo:e.postDescAC,name:a.name,id:a.id,deleteTab:e.deleteTab,updNameToDoAC:e.updNameToDoAC}),e.list.map((function(n,r){return n.user_id==a.id?o.a.createElement(g,{lists:n.description,id:n.todo_id,user_id:n.user_id,deletePost:e.deletePost,updToDo:e.updToDo,movePriority:t,key:r+n.description,date:n.date,done:n.done}):console.log()})))})),o.a.createElement(E,{addNewTab:e.addNewTab,number:e.name.length+1,table_group_id:e.author.id}))))},v=a(18),D=a(8),O=a.n(D),_=a(10),N=a(3),j=a(52),k={get:function(){return j.get("https://ancient-atoll-77175.herokuapp.com/todos").then((function(e){return e}))},getUser:function(e){return j.post("https://ancient-atoll-77175.herokuapp.com/users",{user:e}).then((function(e){return e}))},getTodos:function(e){return j.get("https://ancient-atoll-77175.herokuapp.com/todoList/"+e).then((function(e){return e}))},deleteId:function(e){return j.delete("https://ancient-atoll-77175.herokuapp.com/todos/"+e).then((function(e){return e}))},deleteTableId:function(e){return j.delete("https://ancient-atoll-77175.herokuapp.com/todoList/"+e).then((function(e){return e}))},addNewTab:function(e,t,a){return j.post("https://ancient-atoll-77175.herokuapp.com/todoList",{number:e,table_group_id:t,description:a}).then((function(e){return e}))},postDesc:function(e,t){return j.post("https://ancient-atoll-77175.herokuapp.com/todos/",{description:e,id:t}).then((function(e){return e.data}))},updDesc:function(e,t,a,n){return j.put("https://ancient-atoll-77175.herokuapp.com/todos/"+t,{description:e,done:a,date:n}).then((function(e){return e}))},updNameToDo:function(e,t){return console.log(e,t),j.put("https://ancient-atoll-77175.herokuapp.com/todoList/"+t,{name:e})}},C={toDoList:[],todoName:null,user:null,id:null,auth:0,preloader:!1},w=function(e){return{type:"ADD_USER",user:e}},y=function(e){return{type:"PRIORITY",newTodo:e}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return Object(N.a)(Object(N.a)({},e),{},{user:t.user,auth:1});case"TODO_NAME":return console.log(t.name),Object(N.a)(Object(N.a)({},e),{},{todoName:t.name});case"TXT_ADD":return Object(N.a)(Object(N.a)({},e),{},{toDoList:t.text});case"ADD_TAB":return Object(N.a)(Object(N.a)({},e),{},{todoName:[].concat(Object(m.a)(e.todoName),[{name:t.name,user_id:t.group_id,id:t.id}])});case"DELETE":var a=e.toDoList.filter((function(e){return e.todo_id!=t.id}));return console.log(t.id),console.log(a),Object(N.a)(Object(N.a)({},e),{},{toDoList:a});case"DEL_TAB":var n=e.todoName.filter((function(e){return e.id!=t.id}));return console.log(n),Object(N.a)(Object(N.a)({},e),{},{todoName:n});case"NEW_TEXT":return Object(N.a)(Object(N.a)({},e),{},{toDoList:[].concat(Object(m.a)(e.toDoList),Object(m.a)(t.obj))});case"UPD_TODONAME":for(var o in e.todoName)e.todoName[o].id==t.id&&(e.todoName[o].name=t.name);return Object(N.a)(Object(N.a)({},e),{},{todoName:e.todoName});case"UPD_TEXT":for(var r in e.toDoList)e.toDoList[r].todo_id==t.id&&(e.toDoList[r].description=t.text,e.toDoList[r].done=t.done,e.toDoList[r].date=t.date);return console.log(e.toDoList),Object(N.a)(Object(N.a)({},e),{},{toDoList:e.toDoList});case"PRIORITY":console.log(t.newTodo);var c=t.newTodo;return Object(N.a)(Object(N.a)({},e),{},{toDoList:c});case"LOAD":return console.log(e.preloader),Object(N.a)(Object(N.a)({},e),{},{preloader:!e.preloader});default:return e}},L=a(37),x=a.n(L),P=function(e){var t=Object(n.useState)(""),a=Object(p.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(0),i=Object(p.a)(s,2);i[0],i[1];Object(n.useEffect)((function(){c(e.user)}),[e.user]);var u=function(){var t=Object(_.a)(O.a.mark((function t(){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r,localStorage.setItem("user",a),e.getUserAC(r);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(e){e.preventDefault()};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"container w-60 "},o.a.createElement("div",{className:"text-center  pt-2"},o.a.createElement("h1",{className:"text-white"},' Please enter "Parhosha" user name: '),o.a.createElement("form",{action:"",className:"d-flex",onSubmit:l},o.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){c(e.currentTarget.value)},onSubmit:l}),o.a.createElement("div",{className:"btn w-25 p-1 btn-success",onClick:u}," Press ")," ",o.a.createElement("br",null))),e.preload?o.a.createElement("img",{src:x.a,className:b.a.preloader,alt:""}):console.log()))},S=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("user");e&&this.props.getUserAC(e),console.log(this.props)}},{key:"render",value:function(){return o.a.createElement("div",{className:b.a.Content},this.props.name?o.a.createElement(T,{list:this.props.list,postDescAC:this.props.postDescAC,deletePost:this.props.deletePost,updToDo:this.props.updToDoAC,movePriorityAC:this.props.movePriorityAC,name:this.props.name,author:this.props.author,addNewTab:this.props.addNewTabAC,deleteTab:this.props.deleteTab,updNameToDoAC:this.props.updNameToDoAC}):o.a.createElement(P,{getUserAC:this.props.getUserAC,preload:this.props.load}))}}]),a}(o.a.Component),F=Object(v.b)((function(e){return{list:e.mainPage.toDoList,name:e.mainPage.todoName,author:e.mainPage.user,load:e.mainPage.preloader}}),{deleteTab:function(e){return console.log(e),function(t){k.deleteTableId(e),t(function(e){return{type:"DEL_TAB",id:e}}(e))}},deletePost:function(e){return console.log(e),function(t){k.deleteId(e),t(function(e){return{type:"DELETE",id:e}}(e))}},postDescAC:function(e,t){return function(){var a=Object(_.a)(O.a.mark((function a(n){var o;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,k.postDesc(e,t);case 2:o=a.sent,console.log(o.rows),n({type:"NEW_TEXT",obj:o.rows});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},updToDoAC:function(e,t,a,n){return console.log(e,t,a,n),function(o){k.updDesc(e,t,a,n),o(function(e,t,a,n){return{type:"UPD_TEXT",text:e,id:t,done:a,date:n}}(e,t,a,n))}},movePriorityAC:function(e){return console.log(e),function(){var t=Object(_.a)(O.a.mark((function t(a){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a(y(e)),t.t0=O.a.keys(e);case 2:if((t.t1=t.t0()).done){t.next=8;break}return n=t.t1.value,t.next=6,k.updDesc(e[n].description,e[n].todo_id,e[n].done,e[n].date);case 6:t.next=2;break;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUserAC:function(e){return function(){var t=Object(_.a)(O.a.mark((function t(a){var n,o,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"LOAD"}),t.next=3,k.getUser(e);case 3:if(!(n=t.sent).data.rowCount){t.next=18;break}return a({type:"LOAD"}),a(w(n.data.rows[0])),t.next=9,k.getTodos(n.data.rows[0].id);case 9:return(o=t.sent).data.rows.sort((function(e,t){return e.id>t.id?1:e.id<t.id?-1:0})),a({type:"TODO_NAME",name:o.data.rows}),t.next=14,k.get();case 14:r=t.sent,a({type:"TXT_ADD",text:r.data}),t.next=20;break;case 18:a({type:"LOAD"}),alert("Wrong User!");case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},addNewTabAC:function(e,t,a){return function(n){k.addNewTab(e,t,a),n({type:"ADD_TAB",id:e,group_id:t,name:a})}},updNameToDoAC:function(e,t){return console.log(e,t),function(a){k.updNameToDo(e,t),a(function(e,t){return{type:"UPD_TODONAME",name:e,id:t}}(e,t))}}})(S),U=a(11),I=a(38),R=Object(U.c)({mainPage:A}),M=Object(U.d)(R,Object(U.a)(I.a));window.store=M;var X=M,Y=function(){c.a.render(o.a.createElement(s.a,null,o.a.createElement(v.a,{store:X},o.a.createElement(F,null))),document.getElementById("root"))};Y(),X.subscribe((function(){Y()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.21884446.chunk.js.map